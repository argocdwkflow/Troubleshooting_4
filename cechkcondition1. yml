- name: FAIL playbook if TCP 443 is NOT reachable
  ansible.builtin.fail:
    msg: |
       Satellite precheck FAILED

      Capsule          : {{ sat_precheck.capsule | default('unknown') }}
      DNS              : {{ sat_precheck.dns_ahosts | default('N/A') }}
      TCP method       : {{ sat_precheck.tcp_method | default('none') }}
      TCP 443 OK       : {{ sat_precheck.port_443_ok }}
      TCP rc           : {{ sat_precheck.tcp_rc | default('N/A') }}
      TCP error        : {{ sat_precheck.tcp_err | default('') }}

      âžœ Port 443 MUST be reachable to continue Satellite registration.
  when:
    - sat_precheck is defined
    - not sat_precheck.port_443_ok | bool