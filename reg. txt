- name: "RHSM | Detect duplicate UUID error (422 / DMI UUID)"
  ansible.builtin.set_fact:
    rhsm_duplicate_uuid: >-
      {{
        (rhsm_register is defined) and
        (
          ('HTTP error (422' in (rhsm_register.stderr | default('')))
          or ('Unprocessable Entity' in (rhsm_register.stderr | default('')))
          or ('DMI UUID' in (rhsm_register.stderr | default('')))
          or ('matches other registered hosts' in (rhsm_register.stderr | default('')))
        )
      }}