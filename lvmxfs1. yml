Parfait ğŸ‘ on va faire Ã§a proprement et en mode best-practice RHEL 9.4 + XFS, exactement comme sur ta capture.
Je te propose une mÃ©thode claire en 6 Ã©tapes, puis les commandes exactes pour chaque LV de vg_apps.
ğŸ¯ Objectif
CrÃ©er des Logical Volumes (LVM) dans le Volume Group vg_apps, formatÃ©s en XFS, puis montÃ©s sous :
/var/lib/*
/var/log/*
/srv/*
1ï¸âƒ£ VÃ©rifications prÃ©alables (OBLIGATOIRE)
Bash
Copy code
vgs
lvs
pvs
VÃ©rifie que :
vg_apps existe
Il reste assez de PE libres
Bash
Copy code
vgs vg_apps
2ï¸âƒ£ CrÃ©ation des Logical Volumes
ğŸ‘‰ Je reprends exactement les tailles visibles sur ton Ã©cran
Bash
Copy code
# Candlepin
lvcreate -L 50G  -n var_lib_candlepin vg_apps
lvcreate -L 8G   -n var_log_candlepin vg_apps

# Foreman
lvcreate -L 50G  -n var_lib_foreman vg_apps
lvcreate -L 5G   -n var_log_foreman vg_apps
lvcreate -L 2G   -n var_log_foremanproxy vg_apps

# HTTPD
lvcreate -L 50G  -n var_lib_httpd vg_apps
lvcreate -L 30G  -n var_log_httpd vg_apps

# RPMs Veritas
lvcreate -L 170G -n srv_rpms_veritas vg_apps

# PostgreSQL
lvcreate -L 200G -n var_lib_pgsql vg_apps

# Pulp
lvcreate -L 1.3T -n var_lib_pulp vg_apps
ğŸ“Œ Astuce pro : si tu veux rÃ©server de lâ€™espace pour plus tard, ne consomme pas 100% du VG.
3ï¸âƒ£ Formatage en Pure XFS (RHEL 9 best practice)
Bash
Copy code
mkfs.xfs /dev/vg_apps/var_lib_candlepin
mkfs.xfs /dev/vg_apps/var_log_candlepin

mkfs.xfs /dev/vg_apps/var_lib_foreman
mkfs.xfs /dev/vg_apps/var_log_foreman
mkfs.xfs /dev/vg_apps/var_log_foremanproxy

mkfs.xfs /dev/vg_apps/var_lib_httpd
mkfs.xfs /dev/vg_apps/var_log_httpd

mkfs.xfs /dev/vg_apps/srv_rpms_veritas
mkfs.xfs /dev/vg_apps/var_lib_pgsql
mkfs.xfs /dev/vg_apps/var_lib_pulp
4ï¸âƒ£ CrÃ©ation des points de montage
Bash
Copy code
mkdir -p /var/lib/candlepin
mkdir -p /var/log/candlepin

mkdir -p /var/lib/foreman
mkdir -p /var/log/foreman
mkdir -p /var/log/foreman-proxy

mkdir -p /var/lib/httpd
mkdir -p /var/log/httpd

mkdir -p /srv/RPMs/veritas
mkdir -p /var/lib/pgsql
mkdir -p /var/lib/pulp
5ï¸âƒ£ EntrÃ©es /etc/fstab (propre et durable)
Fstab
Copy code
/dev/vg_apps/var_lib_candlepin     /var/lib/candlepin        xfs  defaults  0 0
/dev/vg_apps/var_log_candlepin     /var/log/candlepin        xfs  defaults  0 0

/dev/vg_apps/var_lib_foreman       /var/lib/foreman          xfs  defaults  0 0
/dev/vg_apps/var_log_foreman       /var/log/foreman          xfs  defaults  0 0
/dev/vg_apps/var_log_foremanproxy  /var/log/foreman-proxy    xfs  defaults  0 0

/dev/vg_apps/var_lib_httpd         /var/lib/httpd            xfs  defaults  0 0
/dev/vg_apps/var_log_httpd         /var/log/httpd            xfs  defaults  0 0

/dev/vg_apps/srv_rpms_veritas      /srv/RPMs/veritas         xfs  defaults  0 0
/dev/vg_apps/var_lib_pgsql         /var/lib/pgsql            xfs  defaults  0 0
/dev/vg_apps/var_lib_pulp          /var/lib/pulp             xfs  defaults  0 0
ğŸ‘‰ Option production recommandÃ©e :
Fstab
Copy code
defaults,nodev,nosuid
(sauf pour /var/lib/pgsql et /var/lib/pulp â†’ garde defaults)
6ï¸âƒ£ Montage & validation
Bash
Copy code
mount -a
df -hT | grep vg_apps
âœ”ï¸ VÃ©rifie :
Type xfs
Tailles correctes
Aucun warning
ğŸ”¥ Bonnes pratiques Satellite / RHEL 9
âŒ Jamais ext4 pour Satellite â†’ XFS only
âœ”ï¸ /var/lib/pulp isolÃ© (tu lâ€™as bien fait)
âœ”ï¸ /var/lib/pgsql dÃ©diÃ© (perf + recovery)
âœ”ï¸ SÃ©paration /var/log â†’ Ã©vite les incidents critiques
Si tu veux, je peux te fournir :
ğŸ“¦ script bash automatisÃ©
ğŸ¤– rÃ´le Ansible AAP
ğŸ“‹ checklist pre/post install Satellite 6.18
âš™ï¸ tuning XFS (inode, noatime, etc.)
Dis-moi ce que tu veux pour la suite ğŸ’ªâ˜•